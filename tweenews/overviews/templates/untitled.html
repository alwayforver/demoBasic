<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="UIUC DM Group">
    <link rel="shortcut icon" href="../../docs-assets/ico/favicon.png">

    <title>Tweenews News Page</title>
    <!-- Bootstrap core CSS -->
    <link href="/overviews/static/css/bootstrap.css" rel="stylesheet">
    
    <link rel="stylesheet" href="//code.jquery.com/ui/1.11.2/themes/smoothness/jquery-ui.css">
    <!-- Bootstrap theme -->
    <link href="/overviews/static/css/bootstrap-theme.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="/overviews/static/css/custom.css" rel="stylesheet">

<style>

path.link{
    fill: none;
    stroke: #666;
    stroke-width: 1.5px;
}   


path.li/*nk.t1{
    stroke: #ff0000;
}   

path.link.t2{
    stroke: rgb(10,255,255)
    
}*/
circle {
    fill: none;
    stroke: black;
    stroke-width: 1.5px;
}

text {
    font: 10px sans-serif;
    pointer-events: none;
}

text.shadow {
    stroke: #fff;
    stroke-width: 3px;
    stroke-opacity: .8;
}

body {
    background-color: white;
    margin: 0px;
}
.axis path,
    .axis line {
        fill: none;
        stroke: #000;
        shape-rendering: crispEdges;
    }
    /*.x.axis path {
        display: none;
    }*/
    .line {
        fill: none;
        stroke: steelblue;
        stroke-width: 1.5px;
    }

.tabs-left > .nav-tabs > li {
  float: none;
  border-right: 1px solid #D3D3D3;
  margin-bottom: 1px;
}
.tabs-left > .nav-tabs > li > a {
  margin-right: 0;
  text-align: center;
  padding: 15px 15px;
}
.tabs-left > .nav-tabs {
  float: left;
  margin-right: 19px;  
}
.tabs-left > .nav-tabs .active > a,
.tabs-left > .nav-tabs .active > a:hover,
.tabs-left > .nav-tabs .active > a:focus {
  background-color: #d9d9d9;
}
</style>
    <!-- Just for debugging purposes. Don't actually copy this line! -->
    <!--[if lt IE 9]><script src="../../docs-assets/js/ie8-responsive-file-warning.js"></script><![endif]-->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="/overviews/static/script/bootstrap.min.js"></script>
    <script src="/overviews/static/script/jquery.cookie.js"></script>
    <script src="/overviews/static/script/utils.js"></script>
    <script src="/overviews/static/script/readmore.min.js"></script>
    <script src="/overviews/static/script/jquery.tablesorter.min.js"></script>
    

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
     

    
    
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Tweenews: Twitter with News</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="/overviews/">Home</a></li>
            <li><a href="/overviews/news/">News Overview</a></li>
            <li><a href="/overviews/event_discovery/">Event Discovery</a></li>
            <!-- <li><a href="https://code.jquery.com/jquery-1.10.2.min.js">News with Tweet</a></li> -->
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>
    

    <div class="container theme-showcase">
    
      <div class="top-buffer">
        <!-- Make the space for top -->
      </div>

      <a name="top"></a>
      <div class="col-xs-12 search-box">
        

    </div>
     
    
    
   <div class="tabbable tabs-left">
   <ul class="nav nav-tabs" id="leftTabs">
    <li class="active">
      <a href="#a_tab" data-toggle="tab">
        <span></span>Event Details
      </a>
    </li>
    <li>
      <a href="#b_tab" data-toggle="tab">
        <span></span>Event Aspects
      </a>
    </li>
   </ul>

   </div>

<div class="tab-content">
    <div class="container tab-pane active" id="a_tab">
        <div class='row'>
        <div class="col-xs-6" id="headarea">
             <h2>Event Details</h2>
        </div>
        </div>
            
    <div class='row'>
        <div class="col-xs-6" id="area1">
            <h3> Entity Graph and Aspect Time Distribution </h3>
            Node Colors represent different entity categories: Red:Person; Green:Place; Yellow:Org <br>
            Link Colors represent interactions of different aspects.
        </div>
        <div class="col-xs-6" id="area2"> <h3> </h3> 
            <br><br><br>
            Aspect Colors are uniform with the summary below
            <br><br><br><br>
        </div>
    <!-- <div class="col-xs-6" id="area3">area3</div> -->
    </div>

    </div>

    <div class="container tab-pane" id="b_tab">
        <div class='row'>
            <div class="col-xs-6" id="area3">
                 <h2> Aspect Summaries </h2>
                    
                    <h4>Event # 1</h4>
                    <div class='row'>
                        
                        <div class="col-xs-6" id = "area10">
                            <h5> Aspect Entity Graph </h5>
                              
                        </div>

                    </div>
                    <hr>


                
                    <h4>Event # 2</h4>
                    <div class='row'>
                       
                        <div class="col-xs-6" id = "aspectEntityArea1">
                            <h5> Aspect Entity Graph </h5>
                              
                        </div>



                    </div>
                    <hr>


                

             
            </div>
        </div>
    </div>





     
    <!-- <div class="col-xs-6" id="area2">area2</div> -->
    <!-- <div class="col-xs-6" id="area3">area3</div> -->



    
    
    
   

     
        <script>
         
                var data = {
    "nodes":  [
{"id": 0, "name": "Joseph Stalin", size:"7.64812078377",color:"red"},
{"id": 1, "name": "Al Jazeera", size:"6.771700755",color:"yellow"},
{"id": 2, "name": "Al Jazeera English", size:"1",color:"yellow"},
{"id": 3, "name": "Muslim Brotherhood in Egypt", size:"1",color:"yellow"},
{"id": 4, "name": "Jan Hus", size:"7.1745137221",color:"red"},
{"id": 5, "name": "Australia", size:"6.23059443162",color:"green"},
{"id": 6, "name": "Muslim Brotherhood", size:"1",color:"yellow"},
{"id": 7, "name": "Thursday (band)", size:"7.41668651284",color:"yellow"},
{"id": 8, "name": "Mohamed Morsi", size:"6.40864509289",color:"red"},
{"id": 9, "name": "Cairo", size:"6.89100686787",color:"green"},
{"id": 10, "name": "Qatar", size:"1",color:"green"},
{"id": 11, "name": "Egypt", size:"7.44426678098",color:"green"},
{"id": 12, "name": "Muhammad", size:"7.61458278848",color:"red"},
],
"links": [
{"source": 9, "target": 11, color:"#ff0000", weight:1.62278203078 },
]
};
  var mLinkNum = {};
    // sort links first
    sortLinks();                                
    // set up linkIndex and linkNumer, because it may possible multiple links share the same source and target node
    setLinkIndexAndNum();
    
    var w = 500,
        h = 400;
    
    var force = d3.layout.force()
                  .nodes(d3.values(data.nodes))
                  .links(data.links)
                  .size([w, h])
                  .linkDistance(170)
                  .charge(-300)
                  .on("tick", tick)
                  .start();
    
    var svg = d3.select("#area10").append("svg:svg")
                .attr("width", w)
                .attr("height", h)
    
    
    var path = svg.append("svg:g").selectAll("path")
        .data(force.links())
      .enter().append("svg:path")
      .style("stroke", function(d){return d.color})
      .style("stroke-width", function(d){return d.weight+"px"})
      .style("opacity", 0.5);
  
  
    // .attr("class", function(d) { return "link " + d.type; })
   ;
    
    var circle = svg.append("svg:g")
                    .selectAll("circle")
                    .data(force.nodes())
                    .enter().append("svg:circle")
                    // .attr("r", 6)
                    .attr("r", function(d){console.log(d.name);console.log(d.size);return d.size; })
                    // .attr("class",function(d) { console.log("node " + d.type); return "node " + d.type; })
                    .call(force.drag)
                    .style("fill", function(d){ return d.color;});
  
    var text = svg.append("svg:g")                                
                  .selectAll("g")
                  .data(force.nodes())
                  .enter().append("svg:g");
    
    // A copy of the text with a thick white stroke for legibility.
    text.append("svg:text")
        .attr("x", 8)
        .attr("y", ".31em")
        .attr("class", "shadow")
        .text(function(d) { return d.name; });  
    
    text.append("svg:text")
        .attr("x", 8)
        .attr("y", ".31em")
        .text(function(d) { return d.name; });
    
    // Use elliptical arc path segments to doubly-encode directionality.
    function tick() {
        path.attr("d", function(d) {
            var dx = d.target.x - d.source.x,
                dy = d.target.y - d.source.y,
                dr = Math.sqrt(dx * dx + dy * dy);
            // get the total link numbers between source and target node
            var lTotalLinkNum = mLinkNum[d.source.id + "," + d.target.id] || mLinkNum[d.target.id + "," + d.source.id];
            if(lTotalLinkNum > 1)
            {
                // if there are multiple links between these two nodes, we need generate different dr for each path
                dr = dr/(1 + (1/lTotalLinkNum) * (d.linkindex - 1));
            }       
            // generate svg path
            return "M" + d.source.x + "," + d.source.y + 
                "A" + dr + "," + dr + " 0 0 1," + d.target.x + "," + d.target.y + 
                "A" + dr + "," + dr + " 0 0 0," + d.source.x + "," + d.source.y;    
        });
        
        // Add tooltip to the connection path
        path.append("svg:title")
            .text(function(d, i) { return d.name; });
        
        circle.attr("transform", function(d) {
            return "translate(" + d.x + "," + d.y + ")";
        });
        
        text.attr("transform", function(d) {
            return "translate(" + d.x + "," + d.y + ")";
        });
    } 
    
    // sort the links by source, then target
    function sortLinks()
    {                               
        data.links.sort(function(a,b) {
            if (a.source > b.source) 
            {
                return 1;
            }
            else if (a.source < b.source) 
            {
                return -1;
            }
            else 
            {
                if (a.target > b.target) 
                {
                    return 1;
                }
                if (a.target < b.target) 
                {
                    return -1;
                }
                else 
                {
                    return 0;
                }
            }
        });
    }
    
    //any links with duplicate source and target get an incremented 'linknum'
    function setLinkIndexAndNum()
    {                               
        for (var i = 0; i < data.links.length; i++) 
        {
            if (i != 0 &&
                data.links[i].source == data.links[i-1].source &&
                data.links[i].target == data.links[i-1].target) 
            {
                data.links[i].linkindex = data.links[i-1].linkindex + 1;
            }
            else 
            {
                data.links[i].linkindex = 1;
            }
            // save the total number of links between two nodes
            if(mLinkNum[data.links[i].target + "," + data.links[i].source] !== undefined)
            {
                mLinkNum[data.links[i].target + "," + data.links[i].source] = data.links[i].linkindex;
            }
            else
            {
                mLinkNum[data.links[i].source + "," + data.links[i].target] = data.links[i].linkindex;
            }
        }
    }   
});         
         
        </script>

    


    
      
  </body>
  </html>